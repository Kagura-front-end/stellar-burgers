import React, { FC } from 'react';
import { CurrencyIcon, FormattedDate } from '@zlden/react-developer-burger-ui-components';
import styles from './order-card.module.css';
import type { TOrder } from '@utils-types';
import { OrderStatus } from '@components';

export type OrderCardUIProps = { order: TOrder };

export const OrderCardUI: FC<OrderCardUIProps> = ({ order }) => {
  const shown = order.ingredients.slice(0, 6);
  const remains = Math.max(0, order.ingredients.length - shown.length);
  const total = 0; // TODO: compute from ingredients if needed

  return (
    <article className={`${styles.order} p-6`}>
      <div className='mb-6' style={{ display: 'flex', justifyContent: 'space-between' }}>
        <p className='text text_type_digits-default'>#{order.number}</p>
        <FormattedDate
          className='text text_type_main-default text_color_inactive'
          date={new Date(order.createdAt)}
        />
      </div>

      <h3 className='text text_type_main-medium mb-2'>{order.name}</h3>
      <OrderStatus status={order.status} />

      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
        {/* This ul/li is OK — it’s inside <article>, not inside a <li> */}
        <ul className={styles.ingredients}>
          {shown.map((id, i) => (
            <li key={`${id}-${i}`} className={styles.img} style={{ zIndex: 6 - i }}>
              {i === 5 && remains > 0 && (
                <span className={`text text_type_main-default ${styles.remains}`}>+{remains}</span>
              )}
            </li>
          ))}
        </ul>

        <div>
          <span className='text text_type_digits-default pr-1'>{total}</span>
          <CurrencyIcon type='primary' />
        </div>
      </div>
    </article>
  );
};

export default OrderCardUI;
