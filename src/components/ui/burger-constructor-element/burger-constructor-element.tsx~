import React, { FC, memo } from 'react';
import styles from './burger-constructor-element.module.css';
import { ConstructorElement, MoveButton } from '@zlden/react-developer-burger-ui-components';
import { BurgerConstructorElementUIProps } from './type';

export const BurgerConstructorElementUI: FC<BurgerConstructorElementUIProps> = memo(
  ({ ingredient, index, totalItems, handleMoveUp, handleMoveDown, handleClose }) => {
    const onMoveUp = () => handleMoveUp?.();
    const onMoveDown = () => handleMoveDown?.();

    // Кнопки перемещения нужны ТОЛЬКО для "серединных" ингредиентов (не булок)
    const showMoveButtons = ingredient.type !== 'bun';

    return (
      <div className={`${styles.element} mb-4 mr-2`}>
        {showMoveButtons && (
          <div className={styles.gripSlot} aria-hidden={false}>
            {/* Кнопки остаются в DOM, но их не видно — клики/фокус работают */}
            <MoveButton
              handleMoveDown={onMoveDown}
              handleMoveUp={onMoveUp}
              isUpDisabled={index === 0}
              isDownDisabled={index === totalItems - 1}
            />
          </div>
        )}

        <div className={styles.element_fullwidth}>
          <ConstructorElement
            text={ingredient.name}
            price={ingredient.price}
            thumbnail={ingredient.image}
            handleClose={handleClose}
          />
        </div>
      </div>
    );
  },
);

export default BurgerConstructorElementUI;
